[{"path":"/articles/Metrics.html","id":"conversion-steps","dir":"Articles","previous_headings":"","what":"Conversion steps","title":"Converting between bed net metrics","text":"conversion net usage annual nets distributed per capita occurs following steps: Usage ⬅️➡️ Access Convert net usage net access using either estimated country-specific user-specified use rate. definition, net use rate = net usage/net access. Access ⬅️➡️ Crop Convert net access net crop using either linear-relationship based number people can use one net, Loess curve fitted observed relationship two metrics across sub-Saharan Africa. Crop ⬅️➡️ Distribution Convert net crop net distributions accounting net distribution timing net loss time.","code":""},{"path":"/articles/Metrics.html","id":"conversion-example","dir":"Articles","previous_headings":"","what":"Conversion example","title":"Converting between bed net metrics","text":"can demonstrate example simple conversion kind , want can make conversions opposite direction","code":"# Create some example data for net usage in Nigeria over 4 years iso3c <- \"NGA\" years <- 2000:2003 usage <- c(0.1, 0.2, 0.6, 0.5) output <-    data.frame(     year = years,     iso3c = iso3c,     usage = usage   )  # Access the estimates of usage rate and net-retention half life for Nigeria usage_rate <- get_usage_rate(iso3c) half_life <- get_halflife(iso3c)  # Use the nets functionality to convert usage ➡️ acesss ➡️ crop ➡️ distribution output$access <- usage_to_access(   usage = output$usage,    use_rate = usage_rate   ) output$crop <- access_to_crop(   access = output$access,   type = \"loess\"   ) output$distribution <- crop_to_distribution(   crop = output$crop,   crop_timesteps = (output$year + 0.5) * 365,   distribution_timesteps = (output$year) * 365,   half_life = half_life )  output #>   year iso3c usage    access       crop distribution #> 1 2000   NGA   0.1 0.1136881 0.06813548   0.07048166 #> 2 2001   NGA   0.2 0.2273763 0.13627097   0.08748988 #> 3 2002   NGA   0.6 0.6821289 0.48564537   0.40593797 #> 4 2003   NGA   0.5 0.5684407 0.36434064   0.01972797 output <- output[, c(\"year\", \"iso3c\", \"distribution\")]  # Use the nets functionality to convert distribution ➡️ crop ➡️ access ➡️ usage output$crop <- distribution_to_crop(   distribution = output$distribution,   distribution_timesteps = (output$year) * 365,   crop_timesteps = (output$year + 0.5) * 365,   half_life = half_life ) output$access <- crop_to_access(   crop = output$crop,   type = \"loess\" ) output$usage <- access_to_usage(   access = output$access,   use_rate = usage_rate )  # We retrieve our original input usage: round(output$usage, 2) #> [1] 0.1 0.2 0.6 0.5"},{"path":"/articles/Metrics.html","id":"the-relationship-between-access-and-crop","dir":"Articles","previous_headings":"","what":"The relationship between access and crop","title":"Converting between bed net metrics","text":"relationship access crop derived monthly data latest available year (2020) across African countries, plotted (corresponding Figure 4 paper Bertozzi-Villa et al). two options access_to_crop() function one “loess” loess smooth data extrapolated allow prediction access values outside observed range second, “linear”, assumed fixed number people can use net. linear model simple fit observed data well, use caution, although often way bed nets costed.","code":"library(ggplot2) access <- seq(0, 1, 0.01) crop_loess <- access_to_crop(access, type = \"loess\") crop_linear <- access_to_crop(access, type = \"linear\") model_data <- data.frame(access = rep(access, 2),                          model = rep(c(\"loess\", \"linear\"), each = length(crop_loess)),                          crop = c(crop_loess, crop_linear))  # Plot curve ggplot() +   geom_point(     data = crop_data,     aes(x = percapita_nets_mean, y = access_mean),     col = \"black\"     ) +   geom_line(     data = model_data,     aes(x = crop, y = access, colour = model),     size = 1.5     ) +   xlim(0, 1) +   ylim(0, 1) +   labs(x = \"Nets per capita\", y = \"Access (proportion)\", colour = \"\") +   theme_classic()"},{"path":"/articles/Metrics.html","id":"assumptions-about-the-net-loss-function","dir":"Articles","previous_headings":"The relationship between access and crop","what":"Assumptions about the net loss function","title":"Converting between bed net metrics","text":"default option metric conversions assumes nets lost according smooth-compact function (net_loss_function = net_loss_map). line paper Bertozzi-Villa et al. alternative option assume exponential net loss (net_loss_function = net_loss_exp), corresponds assumption malariasimulation. proportion nets retained time visualised options , 3 year distribution cycle net half life 1.64 years.","code":"t <- seq(0, 5 * 365, 1)  # Calculate proportion of nets retained assuming smooth-compact net loss nets_retained_map <- net_loss_map(   t = t,   k = 20,   half_life = 1.64 * 365 ) # k is a fixed rate parameter based on which net half lives were estimated in the paper  # Calculate proportion of nets retained assuming exponential net loss nets_retained_exp <- net_loss_exp(   t = t,   mean_retention = 1.64 * 365 )  # Plot curve ggplot() +   geom_line(aes(     x = t / 365, y = nets_retained_map,     colour = \"Smooth-compact\"   )) +   geom_line(aes(     x = t / 365, y = nets_retained_exp,     colour = \"Exponential\"   )) +   ylim(0, 1) +   labs(x = \"Years\", y = \"Proportion of bednets retained\", colour = \"\") +   theme_classic()"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Pete Winskill. Author, maintainer. Nora Schmit. Author. Ines Gerard-Ursin. Author.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Winskill P, Schmit N, Gerard-Ursin (2024). netz: Things Bed Nets. R package version 1.0.4.","code":"@Manual{,   title = {netz: All Things Bed Nets},   author = {Pete Winskill and Nora Schmit and Ines Gerard-Ursin},   year = {2024},   note = {R package version 1.0.4}, }"},{"path":"/index.html","id":"netz-","dir":"","previous_headings":"","what":"All Things Bed Nets","title":"All Things Bed Nets","text":"Netz help setup bed nets malariasimulation. Much functionality within package based excellent bed net model Bertozzi-Villa, Amelia, et al. Nature communications 12.1 (2021): 1-12, please check make sure cite appropriately use package. One key features netz package help conversions different metrics net coverage net numbers. defined throughout : Usage: proportion population net slept . Access: proportion population live household sleep bed net. Crop: number nets population. Always expressed nets per capita. Distribution: number nets distributed. Always expressed nets per capita per year. Broadly, distribution relate cost programme usage impact. metrics modelled within malariasimulation. therefore need careful model inputs match desired target usage specifying bed nets. schematic help understanding elements relate one another","code":""},{"path":"/reference/access_to_crop.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict the nets per capita associated witha given access — access_to_crop","title":"Predict the nets per capita associated witha given access — access_to_crop","text":"Predict nets per capita associated witha given access","code":""},{"path":"/reference/access_to_crop.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict the nets per capita associated witha given access — access_to_crop","text":"","code":"access_to_crop(access, type = \"loess\", people_per_net = 1.66856)"},{"path":"/reference/access_to_crop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict the nets per capita associated witha given access — access_to_crop","text":"access single vector access values type npc access model use. may : \"loess\": loess fit observed access-npc data \"linear\": linear fit observed access-npc data, fitted trend observeation access < 0.5 people_per_net Assumed number people can use 1 net type = \"linear\"","code":""},{"path":"/reference/access_to_crop.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict the nets per capita associated witha given access — access_to_crop","text":"Predicted nets per capita","code":""},{"path":"/reference/access_to_usage.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert access to usage — access_to_usage","title":"Convert access to usage — access_to_usage","text":"Convert access usage","code":""},{"path":"/reference/access_to_usage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert access to usage — access_to_usage","text":"","code":"access_to_usage(access, use_rate)"},{"path":"/reference/access_to_usage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert access to usage — access_to_usage","text":"access single value vector access. use_rate single value vector usage rates.","code":""},{"path":"/reference/access_to_usage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert access to usage — access_to_usage","text":"Usage","code":""},{"path":"/reference/crop_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Crop data. — crop_data","title":"Crop data. — crop_data","text":"original data publication please see: Bertozzi-Villa, Amelia, et al. Nature communications 12.1 (2021): 1-12.","code":""},{"path":"/reference/crop_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Crop data. — crop_data","text":"","code":"crop_data"},{"path":"/reference/crop_data.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Crop data. — crop_data","text":"data.frame 480 rows 11 columns:","code":""},{"path":"/reference/crop_to_access.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict the access nets associated with a given nets per capita — crop_to_access","title":"Predict the access nets associated with a given nets per capita — crop_to_access","text":"Predict access nets associated given nets per capita","code":""},{"path":"/reference/crop_to_access.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict the access nets associated with a given nets per capita — crop_to_access","text":"","code":"crop_to_access(crop, type = \"loess\", people_per_net = 1.66856)"},{"path":"/reference/crop_to_access.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict the access nets associated with a given nets per capita — crop_to_access","text":"crop single vector nets per capita type npc access model use. may : \"loess\": loess fit observed access-npc data \"linear\": linear fit observed access-npc data, fitted trend observeation access < 0.5 people_per_net Assumed number people can use 1 net type = \"linear\"","code":""},{"path":"/reference/crop_to_access.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict the access nets associated with a given nets per capita — crop_to_access","text":"Predicted access","code":""},{"path":"/reference/crop_to_distribution.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert nets per capita to annual nets per capital delivered — crop_to_distribution","title":"Convert nets per capita to annual nets per capital delivered — crop_to_distribution","text":"Convert nets per capita annual nets per capital delivered","code":""},{"path":"/reference/crop_to_distribution.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert nets per capita to annual nets per capital delivered — crop_to_distribution","text":"","code":"crop_to_distribution(   crop,   crop_timesteps,   distribution_timesteps,   net_loss_function = netz::net_loss_map,   min_distribution = NULL,   max_distribution = NULL,   ... )"},{"path":"/reference/crop_to_distribution.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert nets per capita to annual nets per capital delivered — crop_to_distribution","text":"crop Vector nets per capita crop_timesteps Timesteps crop estimates distribution_timesteps Timesteps distributions net_loss_function Option choose exponential net loss (net_loss_exp) smooth-compact net loss function Bertozzi-Villa, Amelia, et al. Nature communications 12.1 (2021): 1-12 (net_loss_map). Default = net_loss_map. min_distribution Vector optional minimum bounds distributions max_distribution Vector optional maximum bounds distributions ... additional arguments net_loss_function","code":""},{"path":"/reference/crop_to_distribution.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert nets per capita to annual nets per capital delivered — crop_to_distribution","text":"Annual nets per capita delivered","code":""},{"path":"/reference/distribution_to_crop.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert annual nets per capital delivered to nets per capita — distribution_to_crop","title":"Convert annual nets per capital delivered to nets per capita — distribution_to_crop","text":"Convert annual nets per capital delivered nets per capita","code":""},{"path":"/reference/distribution_to_crop.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert annual nets per capital delivered to nets per capita — distribution_to_crop","text":"","code":"distribution_to_crop(   distribution,   distribution_timesteps,   crop_timesteps,   net_loss_function = netz::net_loss_map,   ... )"},{"path":"/reference/distribution_to_crop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert annual nets per capital delivered to nets per capita — distribution_to_crop","text":"distribution Nets per capital delivered distribution_timesteps Timesteps distributions crop_timesteps Timesteps return crop estimates net_loss_function Option choose exponential net loss (net_loss_exp) smooth-compact net loss function Bertozzi-Villa, Amelia, et al. Nature communications 12.1 (2021): 1-12 (net_loss_map). Default = net_loss_map. ... additional arguments net_loss_function","code":""},{"path":"/reference/distribution_to_crop.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert annual nets per capital delivered to nets per capita — distribution_to_crop","text":"Nets per capita","code":""},{"path":"/reference/get_halflife.html","id":null,"dir":"Reference","previous_headings":"","what":"Get half life — get_halflife","title":"Get half life — get_halflife","text":"Get half life","code":""},{"path":"/reference/get_halflife.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get half life — get_halflife","text":"","code":"get_halflife(iso3c, not_found_fn = stats::median, ...)"},{"path":"/reference/get_halflife.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get half life — get_halflife","text":"iso3c ISO3c code. not_found_fn function summarise across available half-life estimates produce estimate countries dataset ... arguments passed not_found_fn","code":""},{"path":"/reference/get_halflife.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get half life — get_halflife","text":"Half life","code":""},{"path":"/reference/get_usage_rate.html","id":null,"dir":"Reference","previous_headings":"","what":"Get usage rate — get_usage_rate","title":"Get usage rate — get_usage_rate","text":"Get usage rate","code":""},{"path":"/reference/get_usage_rate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get usage rate — get_usage_rate","text":"","code":"get_usage_rate(iso3c, not_found_fn = stats::median, ...)"},{"path":"/reference/get_usage_rate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get usage rate — get_usage_rate","text":"iso3c ISO3c code. not_found_fn function summarise across available half-life estimates produce estimate countries dataset ... arguments passed not_found_fn","code":""},{"path":"/reference/get_usage_rate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get usage rate — get_usage_rate","text":"Usage rate","code":""},{"path":"/reference/halflife.html","id":null,"dir":"Reference","previous_headings":"","what":"Retention half life estimates. — halflife","title":"Retention half life estimates. — halflife","text":"original data publication please see: Bertozzi-Villa, Amelia, et al. Nature communications 12.1 (2021): 1-12.","code":""},{"path":"/reference/halflife.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retention half life estimates. — halflife","text":"","code":"halflife"},{"path":"/reference/halflife.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Retention half life estimates. — halflife","text":"data.frame 480 rows 11 columns:","code":""},{"path":"/reference/model_distribution_to_usage.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate the population-level bed net usage at given times for a set of bed net distributions at given times. This assumes a constant rate of net loss (as in malariasimulation) and that recipients of multiple rounds are random. — model_distribution_to_usage","title":"Estimate the population-level bed net usage at given times for a set of bed net distributions at given times. This assumes a constant rate of net loss (as in malariasimulation) and that recipients of multiple rounds are random. — model_distribution_to_usage","text":"Estimate population-level bed net usage given times set bed net distributions given times. assumes constant rate net loss (malariasimulation) recipients multiple rounds random.","code":""},{"path":"/reference/model_distribution_to_usage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate the population-level bed net usage at given times for a set of bed net distributions at given times. This assumes a constant rate of net loss (as in malariasimulation) and that recipients of multiple rounds are random. — model_distribution_to_usage","text":"","code":"model_distribution_to_usage(   usage_timesteps,   distribution,   distribution_timesteps,   mean_retention = 365 * 5 )"},{"path":"/reference/model_distribution_to_usage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate the population-level bed net usage at given times for a set of bed net distributions at given times. This assumes a constant rate of net loss (as in malariasimulation) and that recipients of multiple rounds are random. — model_distribution_to_usage","text":"usage_timesteps Target usage time points distribution Vector model distribution (% total population) distribution_timesteps vector distribution time steps mean_retention average duration net retention (days)","code":""},{"path":"/reference/model_distribution_to_usage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate the population-level bed net usage at given times for a set of bed net distributions at given times. This assumes a constant rate of net loss (as in malariasimulation) and that recipients of multiple rounds are random. — model_distribution_to_usage","text":"Usage estimates timepoints","code":""},{"path":"/reference/net_loss_exp.html","id":null,"dir":"Reference","previous_headings":"","what":"Function of net loss over time from malariasimulation Net loss is exponential. — net_loss_exp","title":"Function of net loss over time from malariasimulation Net loss is exponential. — net_loss_exp","text":"Function net loss time malariasimulation Net loss exponential.","code":""},{"path":"/reference/net_loss_exp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function of net loss over time from malariasimulation Net loss is exponential. — net_loss_exp","text":"","code":"net_loss_exp(t, mean_retention)"},{"path":"/reference/net_loss_exp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function of net loss over time from malariasimulation Net loss is exponential. — net_loss_exp","text":"t Single value vector timesteps days. mean_retention (Country-specific) average duration net retention days.","code":""},{"path":"/reference/net_loss_exp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function of net loss over time from malariasimulation Net loss is exponential. — net_loss_exp","text":"proportion nets retained time.","code":""},{"path":"/reference/net_loss_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Function of net loss over time. — net_loss_map","title":"Function of net loss over time. — net_loss_map","text":"Net loss follows S-shaped smooth compact curve, Bertozzi-Villa, Amelia, et al. Nature communications 12.1 (2021): 1-12.","code":""},{"path":"/reference/net_loss_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function of net loss over time. — net_loss_map","text":"","code":"net_loss_map(t, half_life, k = 20)"},{"path":"/reference/net_loss_map.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function of net loss over time. — net_loss_map","text":"t Single value vector timesteps days. half_life (Country-specific) half-life nets days. k Fixed rate. Default = 20 Bertozzi-Villa, Amelia, et al. Nature communications 12.1 (2021): 1-12.","code":""},{"path":"/reference/net_loss_map.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function of net loss over time. — net_loss_map","text":"proportion nets retained time.","code":""},{"path":"/reference/npc_fits.html","id":null,"dir":"Reference","previous_headings":"","what":"Loess and linear model fits to npc access data. — npc_fits","title":"Loess and linear model fits to npc access data. — npc_fits","text":"original model publication please see: Bertozzi-Villa, Amelia, et al. Nature communications 12.1 (2021): 1-12. Nets per capita converted nets distributed annually accounting net loss time within given distribution cycle.","code":""},{"path":"/reference/npc_fits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Loess and linear model fits to npc access data. — npc_fits","text":"","code":"npc_fits"},{"path":"/reference/npc_fits.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Loess and linear model fits to npc access data. — npc_fits","text":"list three model files:","code":""},{"path":"/reference/usage_rate.html","id":null,"dir":"Reference","previous_headings":"","what":"Usage rate estimates — usage_rate","title":"Usage rate estimates — usage_rate","text":"original data publication please see: Bertozzi-Villa, Amelia, et al. Nature communications 12.1 (2021): 1-12.","code":""},{"path":"/reference/usage_rate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Usage rate estimates — usage_rate","text":"","code":"usage_rate"},{"path":"/reference/usage_rate.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Usage rate estimates — usage_rate","text":"data.frame 480 rows 11 columns:","code":""},{"path":"/reference/usage_to_access.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert usage to access — usage_to_access","title":"Convert usage to access — usage_to_access","text":"Convert usage access","code":""},{"path":"/reference/usage_to_access.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert usage to access — usage_to_access","text":"","code":"usage_to_access(usage, use_rate, max_access_value = 1)"},{"path":"/reference/usage_to_access.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert usage to access — usage_to_access","text":"usage single value vector desired target usages model. use_rate single value vector usage rates. max_access_value Value use resulting access > 1","code":""},{"path":"/reference/usage_to_access.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert usage to access — usage_to_access","text":"Access","code":""},{"path":"/reference/usage_to_model_distribution.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate the malaraisimulation input distribution from usage assumes an exponentially distributed net loss function and randomly correlated net distribution. — usage_to_model_distribution","title":"Estimate the malaraisimulation input distribution from usage assumes an exponentially distributed net loss function and randomly correlated net distribution. — usage_to_model_distribution","text":"Estimate malaraisimulation input distribution usage assumes exponentially distributed net loss function randomly correlated net distribution.","code":""},{"path":"/reference/usage_to_model_distribution.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate the malaraisimulation input distribution from usage assumes an exponentially distributed net loss function and randomly correlated net distribution. — usage_to_model_distribution","text":"","code":"usage_to_model_distribution(   usage,   usage_timesteps,   distribution_timesteps,   distribution_lower = rep(0, length(distribution_timesteps)),   distribution_upper = rep(1, length(distribution_timesteps)),   mean_retention = 365 * 5 )"},{"path":"/reference/usage_to_model_distribution.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate the malaraisimulation input distribution from usage assumes an exponentially distributed net loss function and randomly correlated net distribution. — usage_to_model_distribution","text":"usage Target usage usage_timesteps Target usage time points distribution_timesteps vector distribution time steps distribution_lower Lower bound distributions (default = 0) distribution_upper Upper bound distribution (default = 1) mean_retention average duration net retention (days)","code":""}]
