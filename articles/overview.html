<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="netz">
<title>Converting measures of net coverage and number • netz</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Converting measures of net coverage and number">
<meta property="og:description" content="netz">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">netz</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/overview.html">Converting measures of net coverage and number</a>
    <a class="dropdown-item" href="../articles/population_usage.html">Estimating population usage from input distribution</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="overview_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="overview_files/kePrint-0.0.1/kePrint.js"></script><link href="overview_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Converting measures of net coverage and number</h1>
            
      
      
      <div class="d-none name"><code>overview.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>In <a href="https://mrc-ide.github.io/malariasimulation/" class="external-link">malariasimulation</a> we can implement the <a href="https://mrc-ide.github.io/malariasimulation/articles/VectorControl.html" class="external-link">bed net intervention</a> by specifying the % of the population who are distributed a bed net (and assumed to use it) at given time points.</p>
<p>Simulations frequently involve scenarios with a constant bednet usage. To quantify the cost associated with a given steady-state bednet usage, it is necessary to estimate the corresponding number of nets that need to be distributed to achieve the given usage. The % of individuals protected by a net at any time point depends on the cumulative net distributions that have occurred and the duration of net retention. The netz package additionally allows to account for observed non-linearities in the relationship between net distributions and net access in the population, based on the work and data in Bertozzi-Villa, Amelia, et al. Nature communications 12.1 (2021): 1-12.</p>
<div class="section level3">
<h3 id="conversion-steps">Conversion steps<a class="anchor" aria-label="anchor" href="#conversion-steps"></a>
</h3>
<p>The conversion from net usage to annual nets distributed per capita occurs in the following steps:</p>
<ul>
<li>convert net usage to net access using the observed (country-specific) use rate. By definition, net use rate = net usage/net access.</li>
<li>convert net access to nets per capita using a Loess curve fitted to the observed relationship between the two across Africa.</li>
<li>convert nets per capita to annual nets distributed per capita accounting for net distributions and net loss over time.</li>
</ul>
<p>For a full definition of metric relating to net coverage, refer to the original paper (Bertozzi-Villaet al., 2021).</p>
</div>
</div>
<div class="section level2">
<h2 id="quick-example-usage-to-annual-nets-distributed-conversion-for-specific-countries">Quick example: usage to annual nets distributed conversion for specific countries<a class="anchor" aria-label="anchor" href="#quick-example-usage-to-annual-nets-distributed-conversion-for-specific-countries"></a>
</h2>
<p>In its most simple form, only 2 steps are required: preparing the default datasets that inform country-specific net variables, and converting the desired usage to the annual nets distributed per capita.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># First, we specify the coutry iso codes and target usages</span>
<span class="va">input</span> <span class="op">&lt;-</span> <span class="fu">expand_grid</span><span class="op">(</span>iso3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGO"</span>, <span class="st">"BEN"</span>, <span class="st">"NGA"</span><span class="op">)</span>,
                     usage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>

<span class="co"># We can link these to half life, usage rates and distribution frequencies</span>
<span class="va">input</span> <span class="op">&lt;-</span> <span class="va">input</span> <span class="op">%&gt;%</span>
  <span class="fu">left_join</span><span class="op">(</span><span class="fu"><a href="../reference/get_halflife_data.html">get_halflife_data</a></span><span class="op">(</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"iso3"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">left_join</span><span class="op">(</span><span class="fu"><a href="../reference/get_usage_rate_data.html">get_usage_rate_data</a></span><span class="op">(</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"iso3"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>distribution_freq <span class="op">=</span> <span class="fl">365</span> <span class="op">*</span> <span class="fl">3</span><span class="op">)</span>

<span class="co"># Next we can follow the conversion chain to move between different bed net measures</span>
<span class="va">output</span> <span class="op">&lt;-</span> <span class="va">input</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>access <span class="op">=</span> <span class="fu"><a href="../reference/usage_to_access.html">usage_to_access</a></span><span class="op">(</span><span class="va">usage</span>, <span class="va">usage_rate</span><span class="op">)</span>,
         npc <span class="op">=</span> <span class="fu"><a href="../reference/access_to_crop.html">access_to_crop</a></span><span class="op">(</span><span class="va">access</span><span class="op">)</span>,
         anpcd <span class="op">=</span> <span class="fu"><a href="../reference/crop_to_distribution.html">crop_to_distribution</a></span><span class="op">(</span><span class="va">npc</span>, distribution_freq <span class="op">=</span> <span class="va">distribution_freq</span>, net_loss_function <span class="op">=</span> <span class="va">net_loss_map</span>, half_life <span class="op">=</span> <span class="va">half_life</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Warning in usage_to_access(usage, usage_rate): Target usage(s) cannot be</span>
<span class="co">#&gt; achieved with input usage_rates - return NA</span></code></pre></div>
<p>Note that the usage that can be achieved in a given country depends on its use rate. Where a target_usage exceeds the country-specific use rate, a warning is printed and NA is returned for the annual nets distributed.</p>
<p>The output shown below contains the distribution for each country and input usage. Intermediate steps in the conversion (access and crop) are also shown. The distribution is annual, but accounts for the specified net distribution frequency. For example, a 3 year distribution cycle would correspond to distributing the given output every year, or distributing 3 times the given output every 3 years. To calculate the costs of the distributed nets, the user additionally needs to convert the distribution to the annual number of nets distributed by multiplying with the target population at risk.</p>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
iso3
</th>
<th style="text-align:right;">
usage
</th>
<th style="text-align:right;">
half_life
</th>
<th style="text-align:right;">
usage_rate
</th>
<th style="text-align:right;">
distribution_freq
</th>
<th style="text-align:right;">
access
</th>
<th style="text-align:right;">
npc
</th>
<th style="text-align:right;">
anpcd
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
AGO
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
401.50
</td>
<td style="text-align:right;">
0.7705595
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.1297758
</td>
<td style="text-align:right;">
0.0888207
</td>
<td style="text-align:right;">
0.0340528
</td>
</tr>
<tr>
<td style="text-align:left;">
AGO
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
401.50
</td>
<td style="text-align:right;">
0.7705595
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.2595517
</td>
<td style="text-align:right;">
0.1497124
</td>
<td style="text-align:right;">
0.0573979
</td>
</tr>
<tr>
<td style="text-align:left;">
AGO
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:right;">
401.50
</td>
<td style="text-align:right;">
0.7705595
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.3893275
</td>
<td style="text-align:right;">
0.2295442
</td>
<td style="text-align:right;">
0.0880045
</td>
</tr>
<tr>
<td style="text-align:left;">
AGO
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:right;">
401.50
</td>
<td style="text-align:right;">
0.7705595
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.5191033
</td>
<td style="text-align:right;">
0.3249202
</td>
<td style="text-align:right;">
0.1245705
</td>
</tr>
<tr>
<td style="text-align:left;">
AGO
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
401.50
</td>
<td style="text-align:right;">
0.7705595
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.6488792
</td>
<td style="text-align:right;">
0.4454808
</td>
<td style="text-align:right;">
0.1707920
</td>
</tr>
<tr>
<td style="text-align:left;">
AGO
</td>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:right;">
401.50
</td>
<td style="text-align:right;">
0.7705595
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.7786550
</td>
<td style="text-align:right;">
0.6151634
</td>
<td style="text-align:right;">
0.2358463
</td>
</tr>
<tr>
<td style="text-align:left;">
AGO
</td>
<td style="text-align:right;">
0.7
</td>
<td style="text-align:right;">
401.50
</td>
<td style="text-align:right;">
0.7705595
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.9084309
</td>
<td style="text-align:right;">
0.8292809
</td>
<td style="text-align:right;">
0.3179364
</td>
</tr>
<tr>
<td style="text-align:left;">
AGO
</td>
<td style="text-align:right;">
0.8
</td>
<td style="text-align:right;">
401.50
</td>
<td style="text-align:right;">
0.7705595
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
AGO
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
401.50
</td>
<td style="text-align:right;">
0.7705595
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
BEN
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
390.55
</td>
<td style="text-align:right;">
0.9608982
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.1040693
</td>
<td style="text-align:right;">
0.0792541
</td>
<td style="text-align:right;">
0.0295596
</td>
</tr>
<tr>
<td style="text-align:left;">
BEN
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
390.55
</td>
<td style="text-align:right;">
0.9608982
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.2081386
</td>
<td style="text-align:right;">
0.1229498
</td>
<td style="text-align:right;">
0.0458568
</td>
</tr>
<tr>
<td style="text-align:left;">
BEN
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:right;">
390.55
</td>
<td style="text-align:right;">
0.9608982
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.3122079
</td>
<td style="text-align:right;">
0.1803973
</td>
<td style="text-align:right;">
0.0672832
</td>
</tr>
<tr>
<td style="text-align:left;">
BEN
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:right;">
390.55
</td>
<td style="text-align:right;">
0.9608982
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.4162772
</td>
<td style="text-align:right;">
0.2477764
</td>
<td style="text-align:right;">
0.0924137
</td>
</tr>
<tr>
<td style="text-align:left;">
BEN
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
390.55
</td>
<td style="text-align:right;">
0.9608982
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.5203465
</td>
<td style="text-align:right;">
0.3258919
</td>
<td style="text-align:right;">
0.1215486
</td>
</tr>
<tr>
<td style="text-align:left;">
BEN
</td>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:right;">
390.55
</td>
<td style="text-align:right;">
0.9608982
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.6244158
</td>
<td style="text-align:right;">
0.4179088
</td>
<td style="text-align:right;">
0.1558684
</td>
</tr>
<tr>
<td style="text-align:left;">
BEN
</td>
<td style="text-align:right;">
0.7
</td>
<td style="text-align:right;">
390.55
</td>
<td style="text-align:right;">
0.9608982
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.7284851
</td>
<td style="text-align:right;">
0.5447588
</td>
<td style="text-align:right;">
0.2031799
</td>
</tr>
<tr>
<td style="text-align:left;">
BEN
</td>
<td style="text-align:right;">
0.8
</td>
<td style="text-align:right;">
390.55
</td>
<td style="text-align:right;">
0.9608982
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.8325544
</td>
<td style="text-align:right;">
0.6986608
</td>
<td style="text-align:right;">
0.2605811
</td>
</tr>
<tr>
<td style="text-align:left;">
BEN
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
390.55
</td>
<td style="text-align:right;">
0.9608982
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.9366237
</td>
<td style="text-align:right;">
0.8816417
</td>
<td style="text-align:right;">
0.3288279
</td>
</tr>
<tr>
<td style="text-align:left;">
NGA
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
810.30
</td>
<td style="text-align:right;">
0.8795992
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.1136881
</td>
<td style="text-align:right;">
0.0827412
</td>
<td style="text-align:right;">
0.0579355
</td>
</tr>
<tr>
<td style="text-align:left;">
NGA
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
810.30
</td>
<td style="text-align:right;">
0.8795992
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.2273763
</td>
<td style="text-align:right;">
0.1325488
</td>
<td style="text-align:right;">
0.0928109
</td>
</tr>
<tr>
<td style="text-align:left;">
NGA
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:right;">
810.30
</td>
<td style="text-align:right;">
0.8795992
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.3410644
</td>
<td style="text-align:right;">
0.1983335
</td>
<td style="text-align:right;">
0.1388734
</td>
</tr>
<tr>
<td style="text-align:left;">
NGA
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:right;">
810.30
</td>
<td style="text-align:right;">
0.8795992
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.4547526
</td>
<td style="text-align:right;">
0.2750843
</td>
<td style="text-align:right;">
0.1926144
</td>
</tr>
<tr>
<td style="text-align:left;">
NGA
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
810.30
</td>
<td style="text-align:right;">
0.8795992
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.5684407
</td>
<td style="text-align:right;">
0.3643003
</td>
<td style="text-align:right;">
0.2550836
</td>
</tr>
<tr>
<td style="text-align:left;">
NGA
</td>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:right;">
810.30
</td>
<td style="text-align:right;">
0.8795992
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.6821289
</td>
<td style="text-align:right;">
0.4856699
</td>
<td style="text-align:right;">
0.3400668
</td>
</tr>
<tr>
<td style="text-align:left;">
NGA
</td>
<td style="text-align:right;">
0.7
</td>
<td style="text-align:right;">
810.30
</td>
<td style="text-align:right;">
0.8795992
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.7958170
</td>
<td style="text-align:right;">
0.6408936
</td>
<td style="text-align:right;">
0.4487546
</td>
</tr>
<tr>
<td style="text-align:left;">
NGA
</td>
<td style="text-align:right;">
0.8
</td>
<td style="text-align:right;">
810.30
</td>
<td style="text-align:right;">
0.8795992
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.9095051
</td>
<td style="text-align:right;">
0.8312384
</td>
<td style="text-align:right;">
0.5820344
</td>
</tr>
<tr>
<td style="text-align:left;">
NGA
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
810.30
</td>
<td style="text-align:right;">
0.8795992
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
</tbody>
</table>
<p>The following plot shows the non-linear relationship between usage and distribution (i.e. cost) to achieve this for high usages.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Plot relationship between net usage and nets distributed for each country</span>
<span class="fu">ggplot</span><span class="op">(</span><span class="va">output</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">usage</span>, y <span class="op">=</span> <span class="va">anpcd</span>,
    colour <span class="op">=</span> <span class="va">iso3</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Population net usage"</span>, y <span class="op">=</span> <span class="st">"Nets distributed per person-year"</span>, colour <span class="op">=</span> <span class="st">"Country"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="overview_files/figure-html/unnamed-chunk-4-1.png" width="480"></p>
</div>
<div class="section level2">
<h2 id="quick-example-usage-to-distribution-conversion-for-a-generic-setting">Quick example: usage to distribution conversion for a generic setting<a class="anchor" aria-label="anchor" href="#quick-example-usage-to-distribution-conversion-for-a-generic-setting"></a>
</h2>
<p>If no specific country is being modelled, it is possible to use the same functions to represent a generic or average setting accounting for the observed nets data. The following code starts with the same steps as previously, but now calculates the distribution for a setting with a net use rate and half life corresponding to the median use rate and median half life observed across Africa.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># First, we specify the coutry iso codes and target usages</span>
<span class="va">input</span> <span class="op">&lt;-</span> <span class="fu">expand_grid</span><span class="op">(</span>usage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>

<span class="co"># We can link these to aggregate estimates of half life, usage rates and distribution frequencies</span>
<span class="va">input</span> <span class="op">&lt;-</span> <span class="va">input</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>half_life <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_halflife_data.html">get_halflife_data</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">half_life</span><span class="op">)</span>,
         usage_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_usage_rate_data.html">get_usage_rate_data</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">usage_rate</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>distribution_freq <span class="op">=</span> <span class="fl">365</span> <span class="op">*</span> <span class="fl">3</span><span class="op">)</span>

<span class="co"># Do the conversion</span>
<span class="va">output</span> <span class="op">&lt;-</span> <span class="va">input</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>access <span class="op">=</span> <span class="fu"><a href="../reference/usage_to_access.html">usage_to_access</a></span><span class="op">(</span><span class="va">usage</span>, <span class="va">usage_rate</span><span class="op">)</span>,
         npc <span class="op">=</span> <span class="fu"><a href="../reference/access_to_crop.html">access_to_crop</a></span><span class="op">(</span><span class="va">access</span><span class="op">)</span>,
         anpcd <span class="op">=</span> <span class="fu"><a href="../reference/crop_to_distribution.html">crop_to_distribution</a></span><span class="op">(</span><span class="va">npc</span>, distribution_freq <span class="op">=</span> <span class="va">distribution_freq</span>, net_loss_function <span class="op">=</span> <span class="va">net_loss_map</span>, half_life <span class="op">=</span> <span class="va">half_life</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Warning in usage_to_access(usage, usage_rate): Target usage(s) cannot be</span>
<span class="co">#&gt; achieved with input usage_rates - return NA</span></code></pre></div>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
usage
</th>
<th style="text-align:right;">
half_life
</th>
<th style="text-align:right;">
usage_rate
</th>
<th style="text-align:right;">
distribution_freq
</th>
<th style="text-align:right;">
access
</th>
<th style="text-align:right;">
npc
</th>
<th style="text-align:right;">
anpcd
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
596.775
</td>
<td style="text-align:right;">
0.8395046
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.1191179
</td>
<td style="text-align:right;">
0.0847583
</td>
<td style="text-align:right;">
0.0473386
</td>
</tr>
<tr>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
596.775
</td>
<td style="text-align:right;">
0.8395046
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.2382357
</td>
<td style="text-align:right;">
0.1381924
</td>
<td style="text-align:right;">
0.0771821
</td>
</tr>
<tr>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:right;">
596.775
</td>
<td style="text-align:right;">
0.8395046
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.3573536
</td>
<td style="text-align:right;">
0.2086907
</td>
<td style="text-align:right;">
0.1165563
</td>
</tr>
<tr>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:right;">
596.775
</td>
<td style="text-align:right;">
0.8395046
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.4764715
</td>
<td style="text-align:right;">
0.2912745
</td>
<td style="text-align:right;">
0.1626803
</td>
</tr>
<tr>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
596.775
</td>
<td style="text-align:right;">
0.8395046
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.5955893
</td>
<td style="text-align:right;">
0.3890123
</td>
<td style="text-align:right;">
0.2172681
</td>
</tr>
<tr>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:right;">
596.775
</td>
<td style="text-align:right;">
0.8395046
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.7147072
</td>
<td style="text-align:right;">
0.5266302
</td>
<td style="text-align:right;">
0.2941293
</td>
</tr>
<tr>
<td style="text-align:right;">
0.7
</td>
<td style="text-align:right;">
596.775
</td>
<td style="text-align:right;">
0.8395046
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.8338251
</td>
<td style="text-align:right;">
0.7007233
</td>
<td style="text-align:right;">
0.3913624
</td>
</tr>
<tr>
<td style="text-align:right;">
0.8
</td>
<td style="text-align:right;">
596.775
</td>
<td style="text-align:right;">
0.8395046
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
0.9529429
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
596.775
</td>
<td style="text-align:right;">
0.8395046
</td>
<td style="text-align:right;">
1095
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="detailed-example-of-further-options-and-assumptions">Detailed example of further options and assumptions<a class="anchor" aria-label="anchor" href="#detailed-example-of-further-options-and-assumptions"></a>
</h2>
<p>The previous examples showed the quickest way to obtain the distribution for a given usage, but users can also:</p>
<ul>
<li>break down the conversion into its separate steps</li>
<li>vary assumptions about the relationship crop and access, and about net loss</li>
<li>use different (e.g. more recent) datasets of net metrics</li>
</ul>
<p>The relationship between access and crop is derived from monthly data for the latest available year (2020) across African countries, and plotted below (corresponding to Figure 4 in the <a href="https://www.nature.com/articles/s41467-021-23707-7" class="external-link">paper by Bertozzi-Villa et al</a>). There are three options in the <code><a href="../reference/access_to_crop.html">access_to_crop()</a></code> function one “loess” a loess smooth of the observed data, a second “loess_extrapolate” a loess smooth of the observed data with the trend extrapolated to allow prediction for access values outside of the observed range and a third, “linear”, a linear fit to the lower (access &lt; 0.5) set of observed values. This last model is very simple and does not fit the observed data well, so use with caution.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Read in access vs NPC data:</span>
<span class="va">access_npc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_npc_data.html">get_npc_data</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">access</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0.01</span><span class="op">)</span>
<span class="va">npc_loess</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/access_to_crop.html">access_to_crop</a></span><span class="op">(</span><span class="va">access</span>, type <span class="op">=</span> <span class="st">"loess"</span><span class="op">)</span>
<span class="va">npc_loess_extrapolate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/access_to_crop.html">access_to_crop</a></span><span class="op">(</span><span class="va">access</span>, type <span class="op">=</span> <span class="st">"loess_extrapolate"</span><span class="op">)</span>
<span class="va">npc_linear</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/access_to_crop.html">access_to_crop</a></span><span class="op">(</span><span class="va">access</span>, type <span class="op">=</span> <span class="st">"linear"</span><span class="op">)</span>
<span class="va">model_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>access <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">access</span>, <span class="fl">3</span><span class="op">)</span>,
                         model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"loess"</span>, <span class="st">"loess_extrapolate"</span>, <span class="st">"linear"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">npc_loess</span><span class="op">)</span><span class="op">)</span>,
                         npc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">npc_loess</span>, <span class="va">npc_loess_extrapolate</span>, <span class="va">npc_linear</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Plot curve</span>
<span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span>data <span class="op">=</span> <span class="va">access_npc_data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">percapita_nets_mean</span>, y <span class="op">=</span> <span class="va">access_mean</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span>data <span class="op">=</span> <span class="va">model_data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">npc</span>, y <span class="op">=</span> <span class="va">access</span>, colour <span class="op">=</span> <span class="va">model</span>, lty <span class="op">=</span> <span class="va">model</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html" class="external-link">xlim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Nets per capita"</span>, y <span class="op">=</span> <span class="st">"Access (proportion)"</span>, colour <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="overview_files/figure-html/unnamed-chunk-7-1.png" width="480"></p>
<p>Under default assumptions, nets are assumed to be lost according to a smooth-compact function, which depends on the estimated net half life. The proportion of nets retained over a 3-year distribution cycle with a median retention time / half-life of 1.64 years is shown below.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Calculate proportion of nets retained over a given distribution cycle</span>
<span class="va">distribution_cycle_timesteps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span> <span class="op">*</span> <span class="fl">365</span>, <span class="fl">1</span><span class="op">)</span>
<span class="va">nets_retained</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/net_loss_map.html">net_loss_map</a></span><span class="op">(</span>
  t <span class="op">=</span> <span class="va">distribution_cycle_timesteps</span>,
  k <span class="op">=</span> <span class="fl">20</span>,
  half_life <span class="op">=</span> <span class="fl">1.64</span> <span class="op">*</span> <span class="fl">365</span>
<span class="op">)</span>
<span class="co"># k is a fixed rate parameter based on which net half lives were estimated in the paper</span>

<span class="co"># Plot curve</span>
<span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">distribution_cycle_timesteps</span> <span class="op">/</span> <span class="fl">365</span>, y <span class="op">=</span> <span class="va">nets_retained</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Years"</span>, y <span class="op">=</span> <span class="st">"Proportion of bednets retained"</span>, colour <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="overview_files/figure-html/unnamed-chunk-8-1.png" width="480"></p>
<p>In these outputs, target_access is calculated as target_use/use_rate. Since access is a proportion, it cannot exceed 1. Therefore, where the target usage is higher than the observed use rate, access = NA.</p>
<div class="section level3">
<h3 id="assumptions-about-the-net-loss-function">Assumptions about the net loss function<a class="anchor" aria-label="anchor" href="#assumptions-about-the-net-loss-function"></a>
</h3>
<p>The default option in the <code>usage_to_distribution()</code> function assumes that nets are lost according to a smooth-compact function (net_loss_function = net_loss_map). The alternative option is to assume exponential net loss (<code>net_loss_function = net_loss_exp</code>), which corresponds to the assumption in malariasimulation.</p>
<p>The proportion of nets retained over time are visualised for both options below, for a 3 year distribution cycle and a net half life of 1.64 years.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">distribution_cycle_timesteps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span> <span class="op">*</span> <span class="fl">365</span>, <span class="fl">1</span><span class="op">)</span>

<span class="co"># Calculate proportion of nets retained assuming smooth-compact net loss</span>
<span class="va">nets_retained_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/net_loss_map.html">net_loss_map</a></span><span class="op">(</span>
  t <span class="op">=</span> <span class="va">distribution_cycle_timesteps</span>,
  k <span class="op">=</span> <span class="fl">20</span>,
  half_life <span class="op">=</span> <span class="fl">1.64</span> <span class="op">*</span> <span class="fl">365</span>
<span class="op">)</span>
<span class="co"># k is a fixed rate parameter based on which net half lives were estimated in the paper</span>

<span class="co"># Calculate proportion of nets retained assuming exponential net loss</span>
<span class="va">nets_retained_exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/net_loss_exp.html">net_loss_exp</a></span><span class="op">(</span>
  t <span class="op">=</span> <span class="va">distribution_cycle_timesteps</span>,
  half_life <span class="op">=</span> <span class="fl">1.64</span> <span class="op">*</span> <span class="fl">365</span>
<span class="op">)</span>

<span class="co"># Plot curve</span>
<span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">distribution_cycle_timesteps</span> <span class="op">/</span> <span class="fl">365</span>, y <span class="op">=</span> <span class="va">nets_retained_map</span>,
    colour <span class="op">=</span> <span class="st">"Smooth-compact"</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">distribution_cycle_timesteps</span> <span class="op">/</span> <span class="fl">365</span>, y <span class="op">=</span> <span class="va">nets_retained_exp</span>,
    colour <span class="op">=</span> <span class="st">"Exponential"</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.window.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Years"</span>, y <span class="op">=</span> <span class="st">"Proportion of bednets retained"</span>, colour <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="overview_files/figure-html/unnamed-chunk-9-1.png" width="480"></p>
<p>The effect of the net loss function on the relationship between net usage and distribution is shown below for a generic setting.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># First, we specify some general parameters</span>
<span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>usage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="fl">0.1</span><span class="op">)</span>,
                    half_life <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_halflife_data.html">get_halflife_data</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">half_life</span><span class="op">)</span>,
                    usage_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_usage_rate_data.html">get_usage_rate_data</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">usage_rate</span><span class="op">)</span>,
                    distribution_freq <span class="op">=</span> <span class="fl">365</span> <span class="op">*</span> <span class="fl">3</span><span class="op">)</span>

<span class="co"># Next we can follow the conversion chain to move between different bed net measures</span>
<span class="va">output</span> <span class="op">&lt;-</span> <span class="va">input</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>access <span class="op">=</span> <span class="fu"><a href="../reference/usage_to_access.html">usage_to_access</a></span><span class="op">(</span><span class="va">usage</span>, <span class="va">usage_rate</span><span class="op">)</span>,
         npc <span class="op">=</span> <span class="fu"><a href="../reference/access_to_crop.html">access_to_crop</a></span><span class="op">(</span><span class="va">access</span><span class="op">)</span>,
         anpcd_map <span class="op">=</span> <span class="fu"><a href="../reference/crop_to_distribution.html">crop_to_distribution</a></span><span class="op">(</span><span class="va">npc</span>,
                                  distribution_freq <span class="op">=</span> <span class="va">distribution_freq</span>,
                                  net_loss_function <span class="op">=</span> <span class="va">net_loss_map</span>,
                                  half_life <span class="op">=</span> <span class="va">half_life</span><span class="op">)</span>,
         anpcd_exp <span class="op">=</span> <span class="fu"><a href="../reference/crop_to_distribution.html">crop_to_distribution</a></span><span class="op">(</span><span class="va">npc</span>,
                                  distribution_freq <span class="op">=</span> <span class="va">distribution_freq</span>,
                                  net_loss_function <span class="op">=</span> <span class="va">net_loss_exp</span>,
                                  half_life <span class="op">=</span> <span class="fl">5</span> <span class="op">*</span> <span class="fl">365</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="va">usage</span>, <span class="va">anpcd_map</span>, <span class="va">anpcd_exp</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="va">usage</span>, names_to <span class="op">=</span> <span class="st">"model"</span>, values_to <span class="op">=</span> <span class="st">"annual_percapita_nets_distributed"</span>, names_prefix <span class="op">=</span> <span class="st">"anpcd_"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Plot relationship between net usage and nets distributed for the 2 net loss assumptions</span>
<span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">output</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">usage</span>, y <span class="op">=</span> <span class="va">annual_percapita_nets_distributed</span>, col <span class="op">=</span> <span class="va">model</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Population net usage"</span>, y <span class="op">=</span> <span class="st">"Nets distributed per person-year"</span>, colour <span class="op">=</span> <span class="st">"Net loss function"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="overview_files/figure-html/unnamed-chunk-11-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="use-different-datasets-of-net-metrics">Use different datasets of net metrics<a class="anchor" aria-label="anchor" href="#use-different-datasets-of-net-metrics"></a>
</h3>
<p>Refer to the documentation for <code><a href="../reference/get_halflife_data.html">get_halflife_data()</a></code>, <code><a href="../reference/get_usage_rate_data.html">get_usage_rate_data()</a></code> and <code><a href="../reference/get_npc_data.html">get_npc_data()</a></code> to see how more recent datasets can be used in the package.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Pete Winskill, Nora Schmit, Ines Gerard-Ursin.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
